{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Leading Causes of Death in Malaysia, 2023",
    "subtitle": "A comparison of principal causes by number of deaths.",
    "font": "Georgia",
    "fontSize": 16,
    "subtitleFont": "Arial"
  },
  "width": 600,
  "height": 350,
  "config": {"background": "#fff8dcee"},
  "data": {
    "url": "https://raw.githubusercontent.com/Matessh/Data-Visualisation-2-/refs/heads/main/leading_cause_of_deaths_malaysia_2023%20(1).csv",
    "format": {"type": "csv"}
  },
  "transform": [
    {"calculate": "toNumber(datum.Total_Death_Count)", "as": "deaths_numeric"},
    {
      "calculate": "{'Pneumonia': 'ü´Å', 'Ischaemic Heart Diseases': 'ü´Ä', 'Cancer (All Types)': 'üíÄ', 'Cerebrovascular Diseases': 'üß†', 'Transport Accidents': 'üöó', 'Intentional self-harm': 'üòî'}[datum.Cause_of_Death]",
      "as": "icon"
    }
  ],
  "encoding": {
    "y": {
      "field": "Cause_of_Death",
      "type": "ordinal",
      "sort": {"field": "deaths_numeric", "order": "descending"},
      "title": "Category (Causes of Death)",
      "axis": {
        "ticks": false,
        "domain": false,
        "labels": true,
        "titleFontWeight": "bold"
      }
    },
    "x": {
      "field": "deaths_numeric",
      "type": "quantitative",
      "title": "Number of Deaths",
      "axis": {"grid": false, "titleFontWeight": "bold"}
    },
    "color": {
      "field": "Cause_of_Death",
      "type": "ordinal",
      "legend": null,
      "scale": {
        "domain": [
          "Pneumonia",
          "Ischaemic Heart Diseases",
          "Cancer (All Types)",
          "Cerebrovascular Diseases",
          "Transport Accidents",
          "Intentional self-harm"
        ],
        "range": [
          "#1f77b4",
          "#ff7f0e",
          "#2ca02c",
          "#8b4513",
          "#9467bd",
          "#e377c2"
        ]
      }
    },
    "tooltip": [
      {"field": "Cause_of_Death", "title": "Cause"},
      {"field": "deaths_numeric", "title": "Total Deaths", "format": ","}
    ]
  },
  "layer": [
    {"mark": {"type": "rule", "strokeWidth": 2, "color": "#ccc"}},
    {
      "mark": {
        "type": "circle",
        "size": 1000,
        "stroke": "white",
        "strokeWidth": 2
      }
    },
    {
      "mark": {"type": "text", "fontSize": 22, "color": "white"},
      "encoding": {"text": {"field": "icon"}}
    },
    {
      "mark": {"type": "text", "align": "left", "dx": 25, "color": "black"},
      "encoding": {"text": {"field": "deaths_numeric", "format": ","}}
    },
    {
      "transform": [
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "deaths_numeric", "order": "descending"}]
        },
        {"filter": "datum.rank == 1"}
      ],
      "mark": {
        "type": "text",
        "text": "Top Cause",
        "align": "left",
        "dx": 10,
        "dy": -20,
        "color": "#b30000",
        "fontSize": 12,
        "font": "Arial",
        "fontStyle": "italic",
        "fontWeight": "bold"
      },
      "encoding": {
        "x": {"field": "deaths_numeric"},
        "y": {"field": "Cause_of_Death"},
        "color": {}
      }
    },
    {
      "transform": [
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "deaths_numeric", "order": "ascending"}]
        },
        {"filter": "datum.rank == 1"}
      ],
      "mark": {
        "type": "text",
        "text": "Lowest Cause",
        "align": "left",
        "dx": 25,
        "dy": 20,
        "color": "#6773b3",
        "fontSize": 12,
        "font": "Arial",
        "fontStyle": "italic",
        "fontWeight": "bold"
      },
      "encoding": {
        "x": {"field": "deaths_numeric"},
        "y": {"field": "Cause_of_Death"},
        "color": {}
      }
    }
  ]
}